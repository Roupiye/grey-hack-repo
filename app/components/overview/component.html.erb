<% if @categories.length > 1 %>
  <div class="text-center text-3xl mt-2 mb-4"> Categories </div>
<% end %>

<%= render(Categories::Grid::Component.new(categories: @categories)) %>

<turbo-frame id="posts">
  <div class="mt-7 mb-6">
    <%= render Layout::LinkGroup::Component.new(2) do |c| %>
      <% c.link(name: "Newest", link: "?sort=newest", active: params[:sort] == "newest") %>
      <% c.link(name: "Popular", link: "?sort=popular", active: params[:sort] == "popular") %>
    <% end %>
  </div>

  <% if params[:sort] == "popular" %>
    <div class="mt-7 mb-6">
      <%= render Layout::LinkGroup::Component.new(4) do |c| %>
        <% c.link(name: "Week", link: path_to(request.url, filter: "week"), active: params[:filter] == "week") %>
        <% c.link(name: "Month", link: path_to(request.url, filter: "month"), active: params[:filter] == "month") %>
        <% c.link(name: "Year", link: path_to(request.url, filter: "year"), active: params[:filter] == "year") %>
        <% c.link(name: "All", link: path_to(request.url, filter: "all"), active: params[:filter] == "all") %>
      <% end %>
    </div>
  <% end %>

  <% @posts.each do |post| %>
    <%= render(Posts::Card::Component.new(post: post)) %>
  <% end %>

  <%= render(Pagy::Component.new(pagy: @pagy)) if @pagy %>
</turbo-frame>
