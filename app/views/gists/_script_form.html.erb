<div class="nested-form-wrapper p-1 border border-base-200 rounded mb-6" data-new-record="<%= f.object.new_record? %>">
  <%= content_tag :div, data: {controller: "code-editor", code_editor_language_value: file_extension_to_language(f.object.extension&.to_sym || :txt), code_editor_editorclass_value: "p-2 rounded"} do %>
    <%= f.group :name do %>
      <%= f.text_field :name, data: {code_editor_target: "name", action: "debounced:input->code-editor#reset"}%>
    <% end %>

    <%= f.group :content do %>
      <%= f.text_area :content, data: {code_editor_target: "editor"} %>
    <% end %>

    <div class="trix-content mb-6" data-code-editor-target="preview">
    </div>

    <button class="ml-auto block text-error" type="button" data-action="nested-form#remove">Remove file</button>
  <% end %>
</div>
